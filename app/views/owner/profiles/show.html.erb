<div class="main-container">

  <div class="profile-section">

    <!-- Profile Card -->
    <div class="profile-card">
      <%= image_tag(current_user.avatar.url, alt: current_user.first_name, class: 'user-avatar') %>
      <h3><%= current_user.first_name %> <%= current_user.last_name %></h3>
      <strong>Email:</strong> <%= current_user.email %><br>
      <!-- Add any other profile details you want here -->

      <!-- Update profile button -->
      <%= link_to 'Update Profile', edit_user_registration_path, class: 'update-profile-btn' %>
    </div>

    <!-- Reservations Summary Card -->
    <div class="reservations-summary-card">
      <h3>Reservations Summary</h3>
      <strong>Accepted Reservations:</strong> <%= current_user.reservations.where(status: 'accepted').count %><br>
      <strong>Refused Reservations:</strong> <%= current_user.reservations.where(status: 'refused').count %><br>
      <strong>Pending Reservations: </strong><span>0</span>
    </div>

    <!-- Wish List Card -->
    <div class="wish-list-card">
      <h3>My Wish List ❤️</h3>
      <!-- TODO. -->
    </div>
  </div>




  <div class="books-header">
    <h2>Books that I rent</h2>
    <%= link_to 'Rent a new book', "#", class: 'rent-books-btn' %>
  </div>

  <div class="owned-books-card">
    <div class="owned-books-grid">
      <% current_user.books.each do |book| %>
        <div class="owned-book-card">
          <div class="d-flex justify-content-center">
            <%= image_tag(book.cover.url, alt: book.title, class: 'book-cover-user') %>
          </div>
        </div>
      <% end %>
    </div>
  </div>






  <h2 class="mt-3">My Reservations</h2>
  <div class="reservations-grid">
    <% @reservations.each do |reservation| %>
      <div class="reservation-card <%= 'accepted' if reservation.status == 'accepted' %> <%= 'refused' if reservation.status == 'refused' %>">
        <div class="d-flex justify-content-center">
          <%= image_tag(reservation.book.cover, alt: reservation.book.title, class: 'book-cover-reservation') %>
        </div>
        <%#= reservation.book_id %>
        <%# Instead of book_id, let's display book name using .includes in the controller:
        profiles_controller#show ==> @reservations = current_user.reservations.includes(:book) %>
        <strong>Book Name:</strong> <%= reservation.book.title %><br>
        <strong>Renter Name:</strong> <%= reservation.renter.first_name %> <%= reservation.renter.last_name %><br>
        <strong>Begin Date:</strong> <%= reservation.begin_date %><br>
        <strong>End Date:</strong> <%= reservation.end_date %><br>
        <strong>Total Price:</strong> $<%= reservation.total_price %><br>
        <%#= reservation.status %>
      </div>
    <% end %>
  </div>

<h1><%= @user.first_name %>'s Profile</h1>
<br>



<h2>Reservations:</h2>
<div class="reservations-grid">
  <% @reservations.each do |reservation| %>
    <div class="reservation-card <%= 'accepted' if reservation.status == 'accepted' %> <%= 'refused' if reservation.status == 'refused' %>">
      Book ID: <%= reservation.book_id %><br>
      Renter ID: <%= reservation.renter_id %><br>
      Begin Date: <%= reservation.begin_date %><br>
      End Date: <%= reservation.end_date %><br>
      Status: <%= reservation.status %><br>
      Total Price: $<%= reservation.total_price %>
    </div>
  <% end %>
</div>
